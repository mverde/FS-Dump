import os,sys
import csv


class Inode:
    def __init__(self, inodenum, numlinks, ptrlist):
        self.inodenum = inodenum
        self.parentinode = 0
        self.refby = {}
        self.numlinks = numlinks
        self.ptrlist = ptrlist

class Block:
    def __init__(self, blocknum, refby):
        self.blocknum = blocknum
        self.refby = {}

def main():
    #Open files

<<<<<<< HEAD
    curr_list = []
    total_inodes = 0
    total_blocks = 0
    block_size = 0
    blocks_pgroup = 0
    inodes_pgroup = 0

    blocks_allocated = []
    
=======
    allocated_inodes = []

>>>>>>> 3c25def65ce900452eae0757f2062eadbe76a92d
    with open('super.csv', 'rb') as sup:
        reader = csv.reader(sup)
        curr_list = list(reader)
        total_inodes = curr_list[0][1]
        total_blocks = curr_list[0][2]
        block_size = curr_list[0][3]
        blocks_pgroup = curr_list[0][5]
        inodes_pgroup = curr_list[0][6]
    
    with open('group.csv', 'rb') as grup:
        reader = csv.reader(grup)
        curr_list = list(reader)

    with open('bitmap.csv', 'rb') as bit:
        reader = csv.reader(bit)
        curr_list = list(reader)

    with open('inode.csv', 'rb') as inod:
        reader = csv.reader(inod)
        curr_list = list(reader)
        allocated_inodes = []
        for num in inodecsv:
            allocated_inodes.append(Inode(num[0], num[5], num[11:]))

    with open('directory.csv', 'rb') as direc:
        reader = csv.reader(direc)
        directorycsv = list(reader)
        for inode in directorycsv:
            for allocated_inode in allocated_inodes:
                if(allocated_inode.inodenum == inode[4]):
                    allocated_inode.refby[inode[4]] = inode[1]
                    allocated_inode.parentinode = inode[0]
                    print "dir inode: ", inode[4], "entry num: ", inode[1], "parent: ", inode[0]





    with open('indirect.csv', 'rb') as indir:
        reader = csv.reader(indir)
        curr_list = list(reader)

    curr_list = []

    output = open('lab3b_check.txt', 'r+b')    

    
if __name__ == "__main__":
        main()
